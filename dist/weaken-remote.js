/** @param {NS} ns */
function buildServerList(ns) {
    let serversToScan = ['home'];
    let serverList = [];
    while (serversToScan.length > 0) {
        const server = serversToScan.pop();
        const neighbors = ns.scan(server);
        for (const neighbor of neighbors) {
            if (neighbor != 'home' && !serverList.includes(neighbor)) {
                serversToScan.push(neighbor);
                serverList.push(neighbor);
            }
        }
    }
    return serverList;
}
/** @param {NS} ns */
export async function main(ns) {
    const runningScript = ns.getRunningScript();
    const numThreads = runningScript.threads;
    while (true) {
        let server_list = buildServerList(ns, 'home');
        ns.print('server list:\n' + server_list);
        for (const server of server_list) {
            await ns.weaken(server, { threads: numThreads });
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2Vha2VuLXJlbW90ZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NjcmlwdHMvd2Vha2VuLXJlbW90ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxxQkFBcUI7QUFDckIsU0FBUyxlQUFlLENBQUMsRUFBRTtJQUN2QixJQUFJLGFBQWEsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzdCLElBQUksVUFBVSxHQUFHLEVBQUUsQ0FBQztJQUVwQixPQUFPLGFBQWEsQ0FBQyxNQUFNLEdBQUMsQ0FBQyxFQUFFO1FBQzNCLE1BQU0sTUFBTSxHQUFHLGFBQWEsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUNuQyxNQUFNLFNBQVMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRWxDLEtBQUssTUFBTSxRQUFRLElBQUksU0FBUyxFQUFFO1lBQzlCLElBQUksUUFBUSxJQUFFLE1BQU0sSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLEVBQUU7Z0JBQ3BELGFBQWEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7Z0JBQzdCLFVBQVUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7YUFDN0I7U0FDSjtLQUNKO0lBRUQsT0FBTyxVQUFVLENBQUM7QUFDdEIsQ0FBQztBQUVELHFCQUFxQjtBQUNyQixNQUFNLENBQUMsS0FBSyxVQUFVLElBQUksQ0FBQyxFQUFFO0lBQ3pCLE1BQU0sYUFBYSxHQUFHLEVBQUUsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0lBQzVDLE1BQU0sVUFBVSxHQUFHLGFBQWEsQ0FBQyxPQUFPLENBQUM7SUFFekMsT0FBTyxJQUFJLEVBQUU7UUFDVCxJQUFJLFdBQVcsR0FBRyxlQUFlLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBRTlDLEVBQUUsQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLEdBQUcsV0FBVyxDQUFDLENBQUM7UUFFekMsS0FBSyxNQUFNLE1BQU0sSUFBSSxXQUFXLEVBQUU7WUFDOUIsTUFBTSxFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUUsQ0FBQyxDQUFDO1NBQ3BEO0tBQ0o7QUFDTCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqIEBwYXJhbSB7TlN9IG5zICovXG5mdW5jdGlvbiBidWlsZFNlcnZlckxpc3QobnMpIHtcbiAgICBsZXQgc2VydmVyc1RvU2NhbiA9IFsnaG9tZSddO1xuICAgIGxldCBzZXJ2ZXJMaXN0ID0gW107XG5cbiAgICB3aGlsZSAoc2VydmVyc1RvU2Nhbi5sZW5ndGg+MCkge1xuICAgICAgICBjb25zdCBzZXJ2ZXIgPSBzZXJ2ZXJzVG9TY2FuLnBvcCgpO1xuICAgICAgICBjb25zdCBuZWlnaGJvcnMgPSBucy5zY2FuKHNlcnZlcik7XG5cbiAgICAgICAgZm9yIChjb25zdCBuZWlnaGJvciBvZiBuZWlnaGJvcnMpIHtcbiAgICAgICAgICAgIGlmIChuZWlnaGJvciE9J2hvbWUnICYmICFzZXJ2ZXJMaXN0LmluY2x1ZGVzKG5laWdoYm9yKSkge1xuICAgICAgICAgICAgICAgIHNlcnZlcnNUb1NjYW4ucHVzaChuZWlnaGJvcik7XG4gICAgICAgICAgICAgICAgc2VydmVyTGlzdC5wdXNoKG5laWdoYm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzZXJ2ZXJMaXN0O1xufVxuXG4vKiogQHBhcmFtIHtOU30gbnMgKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtYWluKG5zKSB7XG4gICAgY29uc3QgcnVubmluZ1NjcmlwdCA9IG5zLmdldFJ1bm5pbmdTY3JpcHQoKTtcbiAgICBjb25zdCBudW1UaHJlYWRzID0gcnVubmluZ1NjcmlwdC50aHJlYWRzO1xuXG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgbGV0IHNlcnZlcl9saXN0ID0gYnVpbGRTZXJ2ZXJMaXN0KG5zLCAnaG9tZScpO1xuXG4gICAgICAgIG5zLnByaW50KCdzZXJ2ZXIgbGlzdDpcXG4nICsgc2VydmVyX2xpc3QpO1xuXG4gICAgICAgIGZvciAoY29uc3Qgc2VydmVyIG9mIHNlcnZlcl9saXN0KSB7XG4gICAgICAgICAgICBhd2FpdCBucy53ZWFrZW4oc2VydmVyLCB7IHRocmVhZHM6IG51bVRocmVhZHMgfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iXX0=