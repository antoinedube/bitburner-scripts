function findNextAction(ns) {
    const orderOfTypes = ['Operation', 'Contract', 'General'];
    const targetedTasks = {
        General: ['Training'],
        Contract: ['Tracking', 'Bounty Hunter', 'Retirement'],
        Operation: ['Investigation', 'Stealth Retirement Operation', 'Assassination']
    };
    const lowStaminaTask = 'Hyperbolic Regeneration Chamber';
    const [currentStamina, maxStamina] = ns.bladeburner.getStamina();
    const playerRank = ns.bladeburner.getRank();
    if (currentStamina < 0.80 * maxStamina) {
        return {
            type: 'General',
            name: lowStaminaTask
        };
    }
    // BlackOps have a special structure
    const nextBlackOp = ns.bladeburner.getNextBlackOp();
    if (nextBlackOp != undefined) {
        const [lowerBound, _] = ns.bladeburner.getActionEstimatedSuccessChance('BlackOp', nextBlackOp['name']);
        if (0.9 < lowerBound && nextBlackOp['rank'] <= playerRank) {
            return {
                'type': 'BlackOp',
                'name': nextBlackOp['name']
            };
        }
    }
    for (let actionType of orderOfTypes) {
        const actionNames = targetedTasks[actionType].reverse();
        for (let actionName of actionNames) {
            const [lowerBound, _] = ns.bladeburner.getActionEstimatedSuccessChance(actionType, actionName);
            const countRemaining = ns.bladeburner.getActionCountRemaining(actionType, actionName);
            if (0.8 < lowerBound && 0 < countRemaining) {
                return {
                    'type': actionType,
                    'name': actionName
                };
            }
        }
    }
    return {
        'type': 'General',
        'name': 'Training'
    };
}
function upgradeBladeburnerSkills(ns) {
    const targetedSkills = [
        "Blade's Intuition",
        "Cloak",
        "Short-Circuit",
        "Digital Observer",
        "Tracer",
        "Hyperdrive",
        "Hands of Midas"
    ];
    for (let skill of targetedSkills) {
        const skillCost = ns.bladeburner.getSkillUpgradeCost(skill);
        const numberSkillPoints = ns.bladeburner.getSkillPoints();
        if (skillCost < numberSkillPoints) {
            ns.bladeburner.upgradeSkill(skill);
        }
    }
}
export async function main(ns) {
    ns.disableLog('sleep');
    const ten_seconds = 10 * 1000;
    while (!ns.bladeburner.inBladeburner()) {
        ns.print('Not in BladeBurner');
        await ns.sleep(ten_seconds);
    }
    ns.print('Managing bladeburner');
    while (true) {
        const currentAction = ns.bladeburner.getCurrentAction();
        if (currentAction == null) {
            await ns.sleep(ten_seconds);
            continue;
        }
        const newAction = findNextAction(ns);
        if (currentAction['type'] != newAction['type'] || currentAction['name'] != newAction['name']) {
            const result = ns.bladeburner.startAction(newAction['type'], newAction['name']);
            if (!result) {
                ns.print(`Unable to start action: ${JSON.stringify(newAction)}`);
            }
        }
        upgradeBladeburnerSkills(ns);
        await ns.sleep(ten_seconds);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFuYWdlLWJsYWRlYnVybmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc2NyaXB0cy9tYW5hZ2UtYmxhZGVidXJuZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBYUEsU0FBUyxjQUFjLENBQUMsRUFBTTtJQUM1QixNQUFNLFlBQVksR0FBRyxDQUFDLFdBQVcsRUFBRSxVQUFVLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDMUQsTUFBTSxhQUFhLEdBQWM7UUFDL0IsT0FBTyxFQUFFLENBQUMsVUFBVSxDQUFDO1FBQ3JCLFFBQVEsRUFBRSxDQUFDLFVBQVUsRUFBRSxlQUFlLEVBQUUsWUFBWSxDQUFDO1FBQ3JELFNBQVMsRUFBRSxDQUFDLGVBQWUsRUFBRSw4QkFBOEIsRUFBRSxlQUFlLENBQUM7S0FDOUUsQ0FBQTtJQUVELE1BQU0sY0FBYyxHQUFHLGlDQUFpQyxDQUFDO0lBRXpELE1BQU0sQ0FBQyxjQUFjLEVBQUUsVUFBVSxDQUFDLEdBQUcsRUFBRSxDQUFDLFdBQVcsQ0FBQyxVQUFVLEVBQUUsQ0FBQztJQUNqRSxNQUFNLFVBQVUsR0FBRyxFQUFFLENBQUMsV0FBVyxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBRTVDLElBQUksY0FBYyxHQUFHLElBQUksR0FBRyxVQUFVLEVBQUU7UUFDdEMsT0FBTztZQUNMLElBQUksRUFBRSxTQUFTO1lBQ2YsSUFBSSxFQUFFLGNBQWM7U0FDckIsQ0FBQztLQUNIO0lBRUQsb0NBQW9DO0lBQ3BDLE1BQU0sV0FBVyxHQUFHLEVBQUUsQ0FBQyxXQUFXLENBQUMsY0FBYyxFQUFFLENBQUM7SUFDcEQsSUFBSSxXQUFXLElBQUksU0FBUyxFQUFFO1FBRTVCLE1BQU0sQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLFdBQVcsQ0FBQywrQkFBK0IsQ0FBQyxTQUFTLEVBQUUsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7UUFDdkcsSUFBSSxHQUFHLEdBQUcsVUFBVSxJQUFJLFdBQVcsQ0FBQyxNQUFNLENBQUMsSUFBSSxVQUFVLEVBQUU7WUFDekQsT0FBTztnQkFDTCxNQUFNLEVBQUUsU0FBUztnQkFDakIsTUFBTSxFQUFFLFdBQVcsQ0FBQyxNQUFNLENBQUM7YUFDNUIsQ0FBQztTQUNIO0tBQ0Y7SUFFRCxLQUFLLElBQUksVUFBVSxJQUFJLFlBQVksRUFBRTtRQUNuQyxNQUFNLFdBQVcsR0FBRyxhQUFhLENBQUMsVUFBVSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDeEQsS0FBSyxJQUFJLFVBQVUsSUFBSSxXQUFXLEVBQUU7WUFDbEMsTUFBTSxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsV0FBVyxDQUFDLCtCQUErQixDQUFDLFVBQVUsRUFBRSxVQUFVLENBQUMsQ0FBQztZQUMvRixNQUFNLGNBQWMsR0FBRyxFQUFFLENBQUMsV0FBVyxDQUFDLHVCQUF1QixDQUFDLFVBQVUsRUFBRSxVQUFVLENBQUMsQ0FBQztZQUN0RixJQUFJLEdBQUcsR0FBRyxVQUFVLElBQUksQ0FBQyxHQUFHLGNBQWMsRUFBRTtnQkFDMUMsT0FBTztvQkFDTCxNQUFNLEVBQUUsVUFBVTtvQkFDbEIsTUFBTSxFQUFFLFVBQVU7aUJBQ25CLENBQUM7YUFDSDtTQUNGO0tBQ0Y7SUFFRCxPQUFPO1FBQ0wsTUFBTSxFQUFFLFNBQVM7UUFDakIsTUFBTSxFQUFFLFVBQVU7S0FDbkIsQ0FBQztBQUNKLENBQUM7QUFFRCxTQUFTLHdCQUF3QixDQUFDLEVBQU07SUFDdEMsTUFBTSxjQUFjLEdBQUc7UUFDckIsbUJBQW1CO1FBQ25CLE9BQU87UUFDUCxlQUFlO1FBQ2Ysa0JBQWtCO1FBQ2xCLFFBQVE7UUFDUixZQUFZO1FBQ1osZ0JBQWdCO0tBQ2pCLENBQUM7SUFFRixLQUFLLElBQUksS0FBSyxJQUFJLGNBQWMsRUFBRTtRQUNoQyxNQUFNLFNBQVMsR0FBRyxFQUFFLENBQUMsV0FBVyxDQUFDLG1CQUFtQixDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzVELE1BQU0saUJBQWlCLEdBQUcsRUFBRSxDQUFDLFdBQVcsQ0FBQyxjQUFjLEVBQUUsQ0FBQztRQUMxRCxJQUFJLFNBQVMsR0FBRyxpQkFBaUIsRUFBRTtZQUNqQyxFQUFFLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUNwQztLQUNGO0FBQ0gsQ0FBQztBQUVELE1BQU0sQ0FBQyxLQUFLLFVBQVUsSUFBSSxDQUFDLEVBQU07SUFDL0IsRUFBRSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUN2QixNQUFNLFdBQVcsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDO0lBRTlCLE9BQU8sQ0FBQyxFQUFFLENBQUMsV0FBVyxDQUFDLGFBQWEsRUFBRSxFQUFFO1FBQ3RDLEVBQUUsQ0FBQyxLQUFLLENBQUMsb0JBQW9CLENBQUMsQ0FBQztRQUMvQixNQUFNLEVBQUUsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUM7S0FDN0I7SUFFRCxFQUFFLENBQUMsS0FBSyxDQUFDLHNCQUFzQixDQUFDLENBQUM7SUFFakMsT0FBTyxJQUFJLEVBQUU7UUFDWCxNQUFNLGFBQWEsR0FBRyxFQUFFLENBQUMsV0FBVyxDQUFDLGdCQUFnQixFQUFFLENBQUM7UUFFeEQsSUFBSSxhQUFhLElBQUksSUFBSSxFQUFFO1lBQ3pCLE1BQU0sRUFBRSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUM1QixTQUFTO1NBQ1Y7UUFFRCxNQUFNLFNBQVMsR0FBRyxjQUFjLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDckMsSUFBSSxhQUFhLENBQUMsTUFBTSxDQUFDLElBQUksU0FBUyxDQUFDLE1BQU0sQ0FBQyxJQUFJLGFBQWEsQ0FBQyxNQUFNLENBQUMsSUFBSSxTQUFTLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFDNUYsTUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxFQUFFLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQ2hGLElBQUksQ0FBQyxNQUFNLEVBQUU7Z0JBQ1gsRUFBRSxDQUFDLEtBQUssQ0FBQywyQkFBMkIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLENBQUM7YUFDbEU7U0FDRjtRQUVELHdCQUF3QixDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQzdCLE1BQU0sRUFBRSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQztLQUM3QjtBQUNILENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOUyB9IGZyb20gXCJAbnNcIjtcblxuaW50ZXJmYWNlIEFjdGlvbiB7XG4gIHR5cGU6IHN0cmluZyxcbiAgbmFtZTogc3RyaW5nXG59XG5cbmludGVyZmFjZSBUYXNrVHlwZXMge1xuICBHZW5lcmFsOiBzdHJpbmdbXSxcbiAgQ29udHJhY3Q6IHN0cmluZ1tdLFxuICBPcGVyYXRpb246IHN0cmluZ1tdXG59XG5cbmZ1bmN0aW9uIGZpbmROZXh0QWN0aW9uKG5zOiBOUyk6IEFjdGlvbiB7XG4gIGNvbnN0IG9yZGVyT2ZUeXBlcyA9IFsnT3BlcmF0aW9uJywgJ0NvbnRyYWN0JywgJ0dlbmVyYWwnXTtcbiAgY29uc3QgdGFyZ2V0ZWRUYXNrczogVGFza1R5cGVzID0ge1xuICAgIEdlbmVyYWw6IFsnVHJhaW5pbmcnXSxcbiAgICBDb250cmFjdDogWydUcmFja2luZycsICdCb3VudHkgSHVudGVyJywgJ1JldGlyZW1lbnQnXSxcbiAgICBPcGVyYXRpb246IFsnSW52ZXN0aWdhdGlvbicsICdTdGVhbHRoIFJldGlyZW1lbnQgT3BlcmF0aW9uJywgJ0Fzc2Fzc2luYXRpb24nXVxuICB9XG5cbiAgY29uc3QgbG93U3RhbWluYVRhc2sgPSAnSHlwZXJib2xpYyBSZWdlbmVyYXRpb24gQ2hhbWJlcic7XG5cbiAgY29uc3QgW2N1cnJlbnRTdGFtaW5hLCBtYXhTdGFtaW5hXSA9IG5zLmJsYWRlYnVybmVyLmdldFN0YW1pbmEoKTtcbiAgY29uc3QgcGxheWVyUmFuayA9IG5zLmJsYWRlYnVybmVyLmdldFJhbmsoKTtcblxuICBpZiAoY3VycmVudFN0YW1pbmEgPCAwLjgwICogbWF4U3RhbWluYSkge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnR2VuZXJhbCcsXG4gICAgICBuYW1lOiBsb3dTdGFtaW5hVGFza1xuICAgIH07XG4gIH1cblxuICAvLyBCbGFja09wcyBoYXZlIGEgc3BlY2lhbCBzdHJ1Y3R1cmVcbiAgY29uc3QgbmV4dEJsYWNrT3AgPSBucy5ibGFkZWJ1cm5lci5nZXROZXh0QmxhY2tPcCgpO1xuICBpZiAobmV4dEJsYWNrT3AgIT0gdW5kZWZpbmVkKSB7XG5cbiAgICBjb25zdCBbbG93ZXJCb3VuZCwgX10gPSBucy5ibGFkZWJ1cm5lci5nZXRBY3Rpb25Fc3RpbWF0ZWRTdWNjZXNzQ2hhbmNlKCdCbGFja09wJywgbmV4dEJsYWNrT3BbJ25hbWUnXSk7XG4gICAgaWYgKDAuOSA8IGxvd2VyQm91bmQgJiYgbmV4dEJsYWNrT3BbJ3JhbmsnXSA8PSBwbGF5ZXJSYW5rKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAndHlwZSc6ICdCbGFja09wJyxcbiAgICAgICAgJ25hbWUnOiBuZXh0QmxhY2tPcFsnbmFtZSddXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGZvciAobGV0IGFjdGlvblR5cGUgb2Ygb3JkZXJPZlR5cGVzKSB7XG4gICAgY29uc3QgYWN0aW9uTmFtZXMgPSB0YXJnZXRlZFRhc2tzW2FjdGlvblR5cGVdLnJldmVyc2UoKTtcbiAgICBmb3IgKGxldCBhY3Rpb25OYW1lIG9mIGFjdGlvbk5hbWVzKSB7XG4gICAgICBjb25zdCBbbG93ZXJCb3VuZCwgX10gPSBucy5ibGFkZWJ1cm5lci5nZXRBY3Rpb25Fc3RpbWF0ZWRTdWNjZXNzQ2hhbmNlKGFjdGlvblR5cGUsIGFjdGlvbk5hbWUpO1xuICAgICAgY29uc3QgY291bnRSZW1haW5pbmcgPSBucy5ibGFkZWJ1cm5lci5nZXRBY3Rpb25Db3VudFJlbWFpbmluZyhhY3Rpb25UeXBlLCBhY3Rpb25OYW1lKTtcbiAgICAgIGlmICgwLjggPCBsb3dlckJvdW5kICYmIDAgPCBjb3VudFJlbWFpbmluZykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICd0eXBlJzogYWN0aW9uVHlwZSxcbiAgICAgICAgICAnbmFtZSc6IGFjdGlvbk5hbWVcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgICd0eXBlJzogJ0dlbmVyYWwnLFxuICAgICduYW1lJzogJ1RyYWluaW5nJ1xuICB9O1xufVxuXG5mdW5jdGlvbiB1cGdyYWRlQmxhZGVidXJuZXJTa2lsbHMobnM6IE5TKTogdm9pZCB7XG4gIGNvbnN0IHRhcmdldGVkU2tpbGxzID0gW1xuICAgIFwiQmxhZGUncyBJbnR1aXRpb25cIixcbiAgICBcIkNsb2FrXCIsXG4gICAgXCJTaG9ydC1DaXJjdWl0XCIsXG4gICAgXCJEaWdpdGFsIE9ic2VydmVyXCIsXG4gICAgXCJUcmFjZXJcIixcbiAgICBcIkh5cGVyZHJpdmVcIixcbiAgICBcIkhhbmRzIG9mIE1pZGFzXCJcbiAgXTtcblxuICBmb3IgKGxldCBza2lsbCBvZiB0YXJnZXRlZFNraWxscykge1xuICAgIGNvbnN0IHNraWxsQ29zdCA9IG5zLmJsYWRlYnVybmVyLmdldFNraWxsVXBncmFkZUNvc3Qoc2tpbGwpO1xuICAgIGNvbnN0IG51bWJlclNraWxsUG9pbnRzID0gbnMuYmxhZGVidXJuZXIuZ2V0U2tpbGxQb2ludHMoKTtcbiAgICBpZiAoc2tpbGxDb3N0IDwgbnVtYmVyU2tpbGxQb2ludHMpIHtcbiAgICAgIG5zLmJsYWRlYnVybmVyLnVwZ3JhZGVTa2lsbChza2lsbCk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtYWluKG5zOiBOUyk6IFByb21pc2U8dm9pZD4ge1xuICBucy5kaXNhYmxlTG9nKCdzbGVlcCcpO1xuICBjb25zdCB0ZW5fc2Vjb25kcyA9IDEwICogMTAwMDtcblxuICB3aGlsZSAoIW5zLmJsYWRlYnVybmVyLmluQmxhZGVidXJuZXIoKSkge1xuICAgIG5zLnByaW50KCdOb3QgaW4gQmxhZGVCdXJuZXInKTtcbiAgICBhd2FpdCBucy5zbGVlcCh0ZW5fc2Vjb25kcyk7XG4gIH1cblxuICBucy5wcmludCgnTWFuYWdpbmcgYmxhZGVidXJuZXInKTtcblxuICB3aGlsZSAodHJ1ZSkge1xuICAgIGNvbnN0IGN1cnJlbnRBY3Rpb24gPSBucy5ibGFkZWJ1cm5lci5nZXRDdXJyZW50QWN0aW9uKCk7XG5cbiAgICBpZiAoY3VycmVudEFjdGlvbiA9PSBudWxsKSB7XG4gICAgICBhd2FpdCBucy5zbGVlcCh0ZW5fc2Vjb25kcyk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBjb25zdCBuZXdBY3Rpb24gPSBmaW5kTmV4dEFjdGlvbihucyk7XG4gICAgaWYgKGN1cnJlbnRBY3Rpb25bJ3R5cGUnXSAhPSBuZXdBY3Rpb25bJ3R5cGUnXSB8fCBjdXJyZW50QWN0aW9uWyduYW1lJ10gIT0gbmV3QWN0aW9uWyduYW1lJ10pIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IG5zLmJsYWRlYnVybmVyLnN0YXJ0QWN0aW9uKG5ld0FjdGlvblsndHlwZSddLCBuZXdBY3Rpb25bJ25hbWUnXSk7XG4gICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICBucy5wcmludChgVW5hYmxlIHRvIHN0YXJ0IGFjdGlvbjogJHtKU09OLnN0cmluZ2lmeShuZXdBY3Rpb24pfWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHVwZ3JhZGVCbGFkZWJ1cm5lclNraWxscyhucyk7XG4gICAgYXdhaXQgbnMuc2xlZXAodGVuX3NlY29uZHMpO1xuICB9XG59XG4iXX0=