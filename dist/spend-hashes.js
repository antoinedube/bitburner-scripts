import { scanAllNetwork } from "./scan";
async function spendHashesOnAction(ns, action, target, amount) {
    if (ns.hacknet.hashCapacity() <= ns.hacknet.hashCost(action, amount)) {
        ns.print(`Hash capacity is too low for ${action}`);
        return;
    }
    while (ns.hacknet.numHashes() < ns.hacknet.hashCost(action, amount)) {
        await ns.sleep(1000);
    }
    if (!ns.hacknet.spendHashes(action, target, amount)) {
        ns.print(`Error while executing ${action} on ${target} with n=${amount}`);
    }
}
function selectRandomServer(ns) {
    const serversToAvoid = ['CSEC', 'I.I.I.I', 'run4theh111z', 'avmnite-02h', '.', 'darkweb', 'The-Cave', 'w0r1d_d43m0n'];
    const fullServerList = scanAllNetwork(ns, 'home');
    const filteredServerList = fullServerList.filter(name => !name.startsWith('neighbor-') && !name.startsWith('hacknet-') && !serversToAvoid.includes(name));
    const serverIndex = Math.floor(Math.random() * filteredServerList.length);
    return filteredServerList[serverIndex];
}
export async function main(ns) {
    ns.disableLog('ALL');
    /*
      const upgrades = ns.hacknet.getHashUpgrades();
  
      [
        "Sell for Money",
        "Sell for Corporation Funds",
        "Reduce Minimum Security",
        "Increase Maximum Money",
        "Improve Studying",
        "Improve Gym Training",
        "Exchange for Corporation Research",
        "Exchange for Bladeburner Rank",
        "Exchange for Bladeburner SP",
        "Generate Coding Contract",
        "Company Favor"
      ]
    */
    const ten_trillions = 10 * 1000 * 1000 * 1000 * 1000; // k -> m -> g -> t
    const hacking_level_boundary = 3000;
    while (true) {
        // Change probabilities based on hacking level
        // Low hacking level: more spending on money
        // High hacking level: more spending on reducing security / increasing money on servers
        const r = Math.random();
        if (r < 0.1) {
            const target = selectRandomServer(ns);
            const minLevel = ns.getServerMinSecurityLevel(target);
            if (minLevel > 1.0 && ns.getHackingLevel() > hacking_level_boundary) {
                await spendHashesOnAction(ns, "Reduce Minimum Security", target, 1);
                const minLevelAfter = ns.getServerMinSecurityLevel(target);
                ns.print(`Reduced minimum security level on ${target} from ${ns.format.number(minLevel)} to ${ns.format.number(minLevelAfter)}`);
            }
        }
        else if (r < 0.2) {
            const target = selectRandomServer(ns);
            const maxMoney = ns.getServerMaxMoney(target);
            if (maxMoney < ten_trillions && ns.getHackingLevel() > hacking_level_boundary) {
                await spendHashesOnAction(ns, "Increase Maximum Money", target, 1);
                const maxMoneyAfter = ns.getServerMaxMoney(target);
                ns.print(`Increased maximum money on ${target} from ${ns.format.number(maxMoney)}\$ to ${ns.format.number(maxMoneyAfter)}\$`);
            }
        }
        else if (r < 0.25) {
            if (ns.getHackingLevel() > hacking_level_boundary) {
                await spendHashesOnAction(ns, "Improve Studying", "target", 1);
                ns.print('Improved studying');
            }
        }
        else {
            const sellAmount = parseInt(ns.hacknet.numHashes() / 5.0);
            if (sellAmount < 1) {
                await spendHashesOnAction(ns, "Sell for Money", "target", 1);
                ns.print(`Sold hashes for money (${ns.format.number(1)})`);
            }
            else {
                await spendHashesOnAction(ns, "Sell for Money", "target", sellAmount);
                ns.print(`Sold hashes for money (${ns.format.number(sellAmount)})`);
            }
        }
        await ns.sleep(1000);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3BlbmQtaGFzaGVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc2NyaXB0cy9zcGVuZC1oYXNoZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLFFBQVEsQ0FBQztBQUV4QyxLQUFLLFVBQVUsbUJBQW1CLENBQUMsRUFBTSxFQUFFLE1BQWMsRUFBRSxNQUFjLEVBQUUsTUFBYztJQUN2RixJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsWUFBWSxFQUFFLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFO1FBQ3BFLEVBQUUsQ0FBQyxLQUFLLENBQUMsZ0NBQWdDLE1BQU0sRUFBRSxDQUFDLENBQUM7UUFDbkQsT0FBTztLQUNSO0lBRUQsT0FBTyxFQUFFLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRTtRQUNuRSxNQUFNLEVBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDdEI7SUFFRCxJQUFJLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRTtRQUNuRCxFQUFFLENBQUMsS0FBSyxDQUFDLHlCQUF5QixNQUFNLE9BQU8sTUFBTSxXQUFXLE1BQU0sRUFBRSxDQUFDLENBQUM7S0FDM0U7QUFDSCxDQUFDO0FBRUQsU0FBUyxrQkFBa0IsQ0FBQyxFQUFNO0lBQ2hDLE1BQU0sY0FBYyxHQUFHLENBQUMsTUFBTSxFQUFFLFNBQVMsRUFBRSxjQUFjLEVBQUUsYUFBYSxFQUFFLEdBQUcsRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLGNBQWMsQ0FBQyxDQUFDO0lBRXRILE1BQU0sY0FBYyxHQUFHLGNBQWMsQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFD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QUUsQ0FBQyxLQUFLLENBQUMsbUJBQW1CLENBQUMsQ0FBQzthQUMvQjtTQUNGO2FBQ0k7WUFDSCxNQUFNLFVBQVUsR0FBRyxRQUFRLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsR0FBRyxHQUFHLENBQUMsQ0FBQztZQUUxRCxJQUFJLFVBQVUsR0FBRyxDQUFDLEVBQUU7Z0JBQ2xCLE1BQU0sbUJBQW1CLENBQUMsRUFBRSxFQUFFLGdCQUFnQixFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDN0QsRUFBRSxDQUFDLEtBQUssQ0FBQywwQkFBMEIsRUFBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2FBQzVEO2lCQUFNO2dCQUNMLE1BQU0sbUJBQW1CLENBQUMsRUFBRSxFQUFFLGdCQUFnQixFQUFFLFFBQVEsRUFBRSxVQUFVLENBQUMsQ0FBQztnQkFDdEUsRUFBRSxDQUFDLEtBQUssQ0FBQywwQkFBMEIsRUFBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2FBQ3JFO1NBQ0Y7UUFFRCxNQUFNLEVBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDdEI7QUFDSCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTlMgfSBmcm9tICdAbnMnO1xuaW1wb3J0IHsgc2NhbkFsbE5ldHdvcmsgfSBmcm9tIFwiLi9zY2FuXCI7XG5cbmFzeW5jIGZ1bmN0aW9uIHNwZW5kSGFzaGVzT25BY3Rpb24obnM6IE5TLCBhY3Rpb246IHN0cmluZywgdGFyZ2V0OiBzdHJpbmcsIGFtb3VudDogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gIGlmIChucy5oYWNrbmV0Lmhhc2hDYXBhY2l0eSgpIDw9IG5zLmhhY2tuZXQuaGFzaENvc3QoYWN0aW9uLCBhbW91bnQpKSB7XG4gICAgbnMucHJpbnQoYEhhc2ggY2FwYWNpdHkgaXMgdG9vIGxvdyBmb3IgJHthY3Rpb259YCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgd2hpbGUgKG5zLmhhY2tuZXQubnVtSGFzaGVzKCkgPCBucy5oYWNrbmV0Lmhhc2hDb3N0KGFjdGlvbiwgYW1vdW50KSkge1xuICAgIGF3YWl0IG5zLnNsZWVwKDEwMDApO1xuICB9XG5cbiAgaWYgKCFucy5oYWNrbmV0LnNwZW5kSGFzaGVzKGFjdGlvbiwgdGFyZ2V0LCBhbW91bnQpKSB7XG4gICAgbnMucHJpbnQoYEVycm9yIHdoaWxlIGV4ZWN1dGluZyAke2FjdGlvbn0gb24gJHt0YXJnZXR9IHdpdGggbj0ke2Ftb3VudH1gKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzZWxlY3RSYW5kb21TZXJ2ZXIobnM6IE5TKTogc3RyaW5nIHtcbiAgY29uc3Qgc2VydmVyc1RvQXZvaWQgPSBbJ0NTRUMnLCAnSS5JLkkuSScsICdydW40dGhlaDExMXonLCAnYXZtbml0ZS0wMmgnLCAnLicsICdkYXJrd2ViJywgJ1RoZS1DYXZlJywgJ3cwcjFkX2Q0M20wbiddO1xuXG4gIGNvbnN0IGZ1bGxTZXJ2ZXJMaXN0ID0gc2NhbkFsbE5ldHdvcmsobnMsICdob21lJyk7XG4gIGNvbnN0IGZpbHRlcmVkU2VydmVyTGlzdCA9IGZ1bGxTZXJ2ZXJMaXN0LmZpbHRlcihuYW1lID0+ICFuYW1lLnN0YXJ0c1dpdGgoJ25laWdoYm9yLScpICYmICFuYW1lLnN0YXJ0c1dpdGgoJ2hhY2tuZXQtJykgJiYgIXNlcnZlcnNUb0F2b2lkLmluY2x1ZGVzKG5hbWUpKTtcbiAgY29uc3Qgc2VydmVySW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBmaWx0ZXJlZFNlcnZlckxpc3QubGVuZ3RoKTtcbiAgcmV0dXJuIGZpbHRlcmVkU2VydmVyTGlzdFtzZXJ2ZXJJbmRleF07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtYWluKG5zOiBOUyk6IFByb21pc2U8dm9pZD4ge1xuICBucy5kaXNhYmxlTG9nKCdBTEwnKTtcblxuICAvKlxuICAgIGNvbnN0IHVwZ3JhZGVzID0gbnMuaGFja25ldC5nZXRIYXNoVXBncmFkZXMoKTtcblxuICAgIFtcbiAgICAgIFwiU2VsbCBmb3IgTW9uZXlcIixcbiAgICAgIFwiU2VsbCBmb3IgQ29ycG9yYXRpb24gRnVuZHNcIixcbiAgICAgIFwiUmVkdWNlIE1pbmltdW0gU2VjdXJpdHlcIixcbiAgICAgIFwiSW5jcmVhc2UgTWF4aW11bSBNb25leVwiLFxuICAgICAgXCJJbXByb3ZlIFN0dWR5aW5nXCIsXG4gICAgICBcIkltcHJvdmUgR3ltIFRyYWluaW5nXCIsXG4gICAgICBcIkV4Y2hhbmdlIGZvciBDb3Jwb3JhdGlvbiBSZXNlYXJjaFwiLFxuICAgICAgXCJFeGNoYW5nZSBmb3IgQmxhZGVidXJuZXIgUmFua1wiLFxuICAgICAgXCJFeGNoYW5nZSBmb3IgQmxhZGVidXJuZXIgU1BcIixcbiAgICAgIFwiR2VuZXJhdGUgQ29kaW5nIENvbnRyYWN0XCIsXG4gICAgICBcIkNvbXBhbnkgRmF2b3JcIlxuICAgIF1cbiAgKi9cblxuICBjb25zdCB0ZW5fdHJpbGxpb25zID0gMTAgKiAxMDAwICogMTAwMCAqIDEwMDAgKiAxMDAwOyAgLy8gayAtPiBtIC0+IGcgLT4gdFxuICBjb25zdCBoYWNraW5nX2xldmVsX2JvdW5kYXJ5ID0gMzAwMDtcblxuICB3aGlsZSAodHJ1ZSkge1xuICAgIC8vIENoYW5nZSBwcm9iYWJpbGl0aWVzIGJhc2VkIG9uIGhhY2tpbmcgbGV2ZWxcbiAgICAvLyBMb3cgaGFja2luZyBsZXZlbDogbW9yZSBzcGVuZGluZyBvbiBtb25leVxuICAgIC8vIEhpZ2ggaGFja2luZyBsZXZlbDogbW9yZSBzcGVuZGluZyBvbiByZWR1Y2luZyBzZWN1cml0eSAvIGluY3JlYXNpbmcgbW9uZXkgb24gc2VydmVyc1xuICAgIGNvbnN0IHIgPSBNYXRoLnJhbmRvbSgpO1xuICAgIGlmIChyIDwgMC4xKSB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBzZWxlY3RSYW5kb21TZXJ2ZXIobnMpO1xuICAgICAgY29uc3QgbWluTGV2ZWwgPSBucy5nZXRTZXJ2ZXJNaW5TZWN1cml0eUxldmVsKHRhcmdldCk7XG4gICAgICBpZiAobWluTGV2ZWwgPiAxLjAgJiYgbnMuZ2V0SGFja2luZ0xldmVsKCkgPiBoYWNraW5nX2xldmVsX2JvdW5kYXJ5KSB7XG4gICAgICAgIGF3YWl0IHNwZW5kSGFzaGVzT25BY3Rpb24obnMsIFwiUmVkdWNlIE1pbmltdW0gU2VjdXJpdHlcIiwgdGFyZ2V0LCAxKTtcbiAgICAgICAgY29uc3QgbWluTGV2ZWxBZnRlciA9IG5zLmdldFNlcnZlck1pblNlY3VyaXR5TGV2ZWwodGFyZ2V0KTtcbiAgICAgICAgbnMucHJpbnQoYFJlZHVjZWQgbWluaW11bSBzZWN1cml0eSBsZXZlbCBvbiAke3RhcmdldH0gZnJvbSAke25zLmZvcm1hdC5udW1iZXIobWluTGV2ZWwpfSB0byAke25zLmZvcm1hdC5udW1iZXIobWluTGV2ZWxBZnRlcil9YCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChyIDwgMC4yKSB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBzZWxlY3RSYW5kb21TZXJ2ZXIobnMpO1xuICAgICAgY29uc3QgbWF4TW9uZXkgPSBucy5nZXRTZXJ2ZXJNYXhNb25leSh0YXJnZXQpO1xuICAgICAgaWYgKG1heE1vbmV5IDwgdGVuX3RyaWxsaW9ucyAmJiBucy5nZXRIYWNraW5nTGV2ZWwoKSA+IGhhY2tpbmdfbGV2ZWxfYm91bmRhcnkpIHtcbiAgICAgICAgYXdhaXQgc3BlbmRIYXNoZXNPbkFjdGlvbihucywgXCJJbmNyZWFzZSBNYXhpbXVtIE1vbmV5XCIsIHRhcmdldCwgMSk7XG4gICAgICAgIGNvbnN0IG1heE1vbmV5QWZ0ZXIgPSBucy5nZXRTZXJ2ZXJNYXhNb25leSh0YXJnZXQpO1xuICAgICAgICBucy5wcmludChgSW5jcmVhc2VkIG1heGltdW0gbW9uZXkgb24gJHt0YXJnZXR9IGZyb20gJHtucy5mb3JtYXQubnVtYmVyKG1heE1vbmV5KX1cXCQgdG8gJHtucy5mb3JtYXQubnVtYmVyKG1heE1vbmV5QWZ0ZXIpfVxcJGApO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAociA8IDAuMjUpIHtcbiAgICAgIGlmIChucy5nZXRIYWNraW5nTGV2ZWwoKSA+IGhhY2tpbmdfbGV2ZWxfYm91bmRhcnkpIHtcbiAgICAgICAgYXdhaXQgc3BlbmRIYXNoZXNPbkFjdGlvbihucywgXCJJbXByb3ZlIFN0dWR5aW5nXCIsIFwidGFyZ2V0XCIsIDEpO1xuICAgICAgICBucy5wcmludCgnSW1wcm92ZWQgc3R1ZHlpbmcnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBjb25zdCBzZWxsQW1vdW50ID0gcGFyc2VJbnQobnMuaGFja25ldC5udW1IYXNoZXMoKSAvIDUuMCk7XG5cbiAgICAgIGlmIChzZWxsQW1vdW50IDwgMSkge1xuICAgICAgICBhd2FpdCBzcGVuZEhhc2hlc09uQWN0aW9uKG5zLCBcIlNlbGwgZm9yIE1vbmV5XCIsIFwidGFyZ2V0XCIsIDEpO1xuICAgICAgICBucy5wcmludChgU29sZCBoYXNoZXMgZm9yIG1vbmV5ICgke25zLmZvcm1hdC5udW1iZXIoMSl9KWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgc3BlbmRIYXNoZXNPbkFjdGlvbihucywgXCJTZWxsIGZvciBNb25leVwiLCBcInRhcmdldFwiLCBzZWxsQW1vdW50KTtcbiAgICAgICAgbnMucHJpbnQoYFNvbGQgaGFzaGVzIGZvciBtb25leSAoJHtucy5mb3JtYXQubnVtYmVyKHNlbGxBbW91bnQpfSlgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCBucy5zbGVlcCgxMDAwKTtcbiAgfVxufVxuIl19